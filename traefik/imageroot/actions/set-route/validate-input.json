{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "set-route input",
    "$id": "http://schema.nethserver.org/traefik/set-route-input.json",
    "description": "Reserve a HTTP route",
    "examples": [
        {
            "instance": "module1",
	    "url": "http://127.0.0.0:2000",
	    "host": "module.example.org",
	    "lets_encrypt": true,
	    "http2https": true
	},
	{
            "instance": "module2",
	    "url": "http://127.0.0.0:2000",
	    "host": "module.example.org",
	    "path": "/foo",
	    "lets_encrypt": true,
	    "http2https": true
	},
	{
            "instance": "module3",
	    "url": "http://127.0.0.0:2000",
	    "path":"/foo",
	    "lets_encrypt":true,
	    "http2https": true
	}
    ],
    "type": "object",
    "required": [
        "instance",
        "url",
        "http2https"
    ],
    "anyOf": [
        {"required" : ["host"]},
        {"required" : ["path"]}
    ],
    "dependencies": {
        "host": {
            "required": ["lets_encrypt"]
        }
    },
    "properties": {
        "instance": {
            "type": "string",
            "title": "Instance name",
            "examples": [
                "module1"
            ],
            "description": "The instance name, which is unique inside the cluster."
        },
        "url": {
            "type": "string",
	    "format": "uri",
            "title": "Backend URL",
            "description": "The backend target URL."
        },
        "host": {
            "type":"string",
            "format": "hostname",
            "title": "Virtualhost",
            "description": "A fully qualified domain name as virtualhost."
        },
        "path": {
            "type":"string",
            "title": "Request path prefix",
            "description": "A path prefix, the matching evaluation will be performed whit and without the trailing slash, eg /foo will match `/foo and `/foo/*, also `/foo/` will match /foo and /foo/*",
            "examples": [
                "/foo",
                "/foo/"
            ]
        },
        "lets_encrypt": {
            "type": "boolean",
            "title": "Let's Encrypt certificate",
            "description": "Request a valid Let's Encrypt certificate."
        },
        "http2https": {
            "type": "boolean",
            "title": "HTTP to HTTPS redirection",
            "description": "Redirect all the HTTP requests to HTTPS"
        }
    }
}
