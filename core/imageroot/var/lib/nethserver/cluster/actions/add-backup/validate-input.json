{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "add-backup input",
    "$id": "http://schema.nethserver.org/cluster/add-backup-input.json",
    "description": "Configure a new backup instance",
    "examples": [
        {
            "name": "BB daily",
            "repository": "6a2a6208-7d4f-5915-9419-e4f1faaa1c76",
            "schedule": "daily",
            "retention": "7d",
            "instances": [
                "dokuwiki1",
                "nextcloud1"
            ],
            "enabled": true
        }
    ],
    "type": "object",
    "required": [
        "name",
        "instances",
        "repository",
        "schedule",
        "retention",
        "enabled"
    ],
    "properties": {
        "instances": {
            "title": "Module instances",
            "description": "Identifiers of module instances included in the backup",
            "type": "array",
            "items": {
                "type": "string",
                "minLength": 1
            }
        },
        "repository": {
            "title": "Repository UUID reference",
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
        },
        "schedule": {
            "title": "Time schedule expression",
            "description": "The string format must be compatible with Calendar Events, described in `systemd.timer` man page",
            "type": "string",
            "minLength": 1,
            "maxLength": 64
        },
        "retention": {
            "title": "Backup retention time",
            "description": "The string format must be comptible with Restic `--keep-within` parameter syntax",
            "type": "string",
            "pattern": "^([0-9]+[ymdh])+$",
            "minLength": 1,
            "maxLength": 16
        },
        "name": {
            "title": "Backup name",
            "type": "string",
            "minLength": 1
        },
        "enabled": {
            "type": "boolean",
            "title": "Enabled/disabled status. If `false` the backup is stopped."
        }
    }
}
