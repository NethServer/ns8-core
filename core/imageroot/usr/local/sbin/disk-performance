#!/usr/bin/fio
#
# disk-performance -- Measure disk performance
#
# !!! Ensure you have enough free disk space before running the benchmark !!!
#
# Version 20251029
#
# PRE-REQUISITES
#
# - Additional software:
#
#      dnf install -y fio
#
# - Free disk space: 2 GB
#
# EXECUTION
#
# For example, the following command tests the disk mounted on the
# currently working directory and saves the benchmark output in
# `./perf.out`.
#
#     disk-performance --output perf.out
#

[global]
ioengine=libaio
direct=1
size=2G
runtime=60
time_based=1
group_reporting=1
unlink=1
filename=disk-performance.dat

# ------------------------------------------------------------
# 1. Random read/write, small blocks, high concurrency
# ------------------------------------------------------------
[randrw]
rw=randrw
bs=4k
numjobs=16
iodepth=32
description=v20250724 Random 4k read/write with 16 concurrent jobs

# ------------------------------------------------------------
# 2. Sequential write, medium concurrency
# ------------------------------------------------------------
[seqwrite]
new_group
rw=write
bs=1M
numjobs=4
iodepth=16
description=v20250724 Sequential 1M write with 4 jobs

# ------------------------------------------------------------
# 3. Mixed workload (70% read, 30% write)
# ------------------------------------------------------------
[mixed]
new_group
rw=randrw
rwmixread=70
bs=8k
numjobs=8
iodepth=16
description=v20250724 70/30 random read/write, medium concurrency
